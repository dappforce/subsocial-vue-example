<template>
  <NuxtLink v-if="imageSrc && imageSrc.length" :to="localePath(link)">
    <div v-if="!isFullView" class="post-image" :style="{ backgroundImage: 'url(' + url + imageSrc +')'}" />
    <img v-if="isFullView" :src="url + imageSrc" class="post-image full-view">
  </NuxtLink>
</template>

<style lang="scss">
.post-image {
  width: 174px;
  height: 174px;
  margin-left: $space_normal;
  border-radius: $border_small;
  background-repeat: no-repeat;
  background-size: cover;
  background-position: center;
  cursor: pointer;

  &.full-view {
    width: 100%;
    height: auto;
    margin-left: 0;
    margin-top: $space_normal;
  }
}

@media only screen and (max-width: 768px) {
  .post-image {
    width: 100%;
    margin-left: 0;
  }
}
</style>

<script lang="ts">
import { Component, Prop, Vue } from 'vue-property-decorator'
import { environment } from '~/environments/environment'

@Component
export default class PostImage extends Vue {
  @Prop({
    type: String,
    default: '/'
  }) link!: string

  @Prop({
    type: String
  }) imageSrc!: string

  @Prop({
    type: Boolean,
    default: false
  }) isFullView!: boolean

  url: string = environment.ipfsUrl
}
</script>
